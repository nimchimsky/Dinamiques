<!DOCTYPE html>
<html lang="ca" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Explorador de Din√†miques | TIS & TAPD</title>
    <meta name="description" content="Explorador visual de din√†miques educatives per a TIS i TAPD">
    <link rel="stylesheet" href="viewer.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="app">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <span class="logo-icon">üéØ</span>
                    <span class="logo-text">Din√†miques</span>
                </div>
                <button class="theme-toggle" id="themeToggle" title="Canviar tema">
                    <span class="icon-sun">‚òÄÔ∏è</span>
                    <span class="icon-moon">üåô</span>
                </button>
            </div>

            <!-- Quick Stats -->
            <div class="sidebar-section">
                <h3 class="sidebar-title">üìä Resum</h3>
                <div class="quick-stats">
                    <div class="stat-item">
                        <span class="stat-value" id="totalCount">-</span>
                        <span class="stat-label">Total</span>
                    </div>
                    <div class="stat-item stat-tis">
                        <span class="stat-value" id="tisCount">-</span>
                        <span class="stat-label">TIS</span>
                    </div>
                    <div class="stat-item stat-tapd">
                        <span class="stat-value" id="tapdCount">-</span>
                        <span class="stat-label">TAPD</span>
                    </div>
                </div>
            </div>

            <!-- Favorites -->
            <div class="sidebar-section">
                <h3 class="sidebar-title">‚≠ê Favorits <span class="badge-count" id="favCount">0</span></h3>
                <div class="favorites-list" id="favoritesList">
                    <p class="empty-favorites">Cap din√†mica desada</p>
                </div>
            </div>

            <!-- Models Distribution -->
            <div class="sidebar-section">
                <h3 class="sidebar-title">üìö Per M√≤dul</h3>
                <div class="model-bars" id="modelBars">
                    <!-- Dynamic model bars -->
                </div>
            </div>

            <!-- Prompt Link -->
            <div class="sidebar-section" style="margin-top: auto; border-bottom: none;">
                <h3 class="sidebar-title">‚ÑπÔ∏è Info</h3>
                <a href="Prompt3.txt" target="_blank" class="prompt-link"
                    style="display: flex; align-items: center; gap: 10px; color: var(--text-secondary); text-decoration: none; font-size: 0.85rem; padding: 8px 0; transition: color 0.2s;">
                    <span style="font-size: 1.2rem;">üìú</span>
                    <span>Veure Prompt Original</span>
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <button class="hamburger" id="sidebarToggle">‚ò∞</button>
                    <h1 class="header-title">Explorador de Din√†miques</h1>
                </div>
                <div class="header-right">
                    <div class="view-toggle">
                        <button class="view-btn active" data-view="grid" title="Vista graella">‚ñ¶</button>
                        <button class="view-btn" data-view="list" title="Vista llista">‚ò∞</button>
                    </div>
                </div>
            </header>

            <!-- Search & Filters Bar -->
            <section class="filters-bar">
                <div class="search-box">
                    <span class="search-icon">üîç</span>
                    <input type="text" id="searchInput" class="search-input"
                        placeholder="Cerca per t√≠tol, contingut, tags..." autocomplete="off">
                    <button class="search-clear hidden" id="searchClear">‚úï</button>
                </div>

                <div class="filter-chips" id="filterChips">
                    <!-- Active filter chips go here -->
                </div>

                <button class="btn-filters" id="toggleFilters">
                    <span>üéõÔ∏è Filtres</span>
                    <span class="filter-badge hidden" id="filterBadge">0</span>
                </button>
            </section>

            <!-- Filters Sidebar Drawer -->
            <div class="filters-overlay hidden" id="filtersOverlay">
                <section class="filters-drawer" id="filtersPanel">
                    <div class="drawer-header">
                        <h2 class="drawer-title">Filtres Avan√ßats</h2>
                        <button class="drawer-close" id="closeFilters">‚úï</button>
                    </div>

                    <div class="drawer-content">
                        <div class="filters-grid">
                            <!-- Cicle -->
                            <div class="filter-group">
                                <label class="filter-label">Cicle formatiu</label>
                                <div class="toggle-buttons" id="cicleFilter">
                                    <button class="toggle-btn active" data-value="all">Tots</button>
                                    <button class="toggle-btn tis" data-value="TIS">TIS</button>
                                    <button class="toggle-btn tapd" data-value="TAPD">TAPD</button>
                                </div>
                            </div>

                            <!-- M√≤dul (MP) -->
                            <div class="filter-group">
                                <label class="filter-label">M√≤dul Professional</label>
                                <select id="mpFilter" class="filter-select">
                                    <option value="all">Tots els m√≤duls</option>
                                </select>
                            </div>

                            <!-- RA -->
                            <div class="filter-group">
                                <label class="filter-label">Resultat d'Aprenentatge (RA)</label>
                                <select id="raFilter" class="filter-select">
                                    <option value="all">Tots els RAs</option>
                                </select>
                            </div>

                            <!-- CA -->
                            <div class="filter-group">
                                <label class="filter-label">Criteri d'Avaluaci√≥ (CA)</label>
                                <select id="caFilter" class="filter-select">
                                    <option value="all">Tots els CAs</option>
                                </select>
                            </div>

                            <!-- Model -->
                            <div class="filter-group">
                                <label class="filter-label">Model LLM</label>
                                <select id="modelFilter" class="filter-select">
                                    <option value="all">Tots els models</option>
                                </select>
                            </div>

                            <!-- Categoria -->
                            <div class="filter-group">
                                <label class="filter-label">Categoria</label>
                                <select id="categoriaFilter" class="filter-select">
                                    <option value="all">Totes les categories</option>
                                    <option value="curricular">Curricular</option>
                                    <option value="general">General</option>
                                </select>
                            </div>

                            <!-- Tipus -->
                            <div class="filter-group">
                                <label class="filter-label">Tipus de din√†mica</label>
                                <select id="tipusFilter" class="filter-select">
                                    <option value="all">Tots els tipus</option>
                                </select>
                            </div>

                            <!-- Temps -->
                            <div class="filter-group">
                                <label class="filter-label">Durada m√†xima</label>
                                <div class="range-wrapper">
                                    <input type="range" id="tempsFilter" min="5" max="120" value="120"
                                        class="range-slider">
                                    <span class="range-value" id="tempsValue">120 min</span>
                                </div>
                            </div>

                            <!-- Soroll -->
                            <div class="filter-group">
                                <label class="filter-label">Nivell de soroll m√†x</label>
                                <div class="range-wrapper">
                                    <input type="range" id="sorollFilter" min="1" max="5" value="5"
                                        class="range-slider">
                                    <span class="range-value" id="sorollValue">5</span>
                                </div>
                            </div>

                            <!-- Participants -->
                            <div class="filter-group">
                                <label class="filter-label">El meu grup t√©</label>
                                <div class="range-wrapper">
                                    <input type="range" id="participantsFilter" min="1" max="40" value="1"
                                        class="range-slider">
                                    <span class="range-value" id="participantsValue">Tots</span>
                                </div>
                            </div>

                            <!-- Tag Filter -->
                            <div class="filter-group">
                                <label class="filter-label">Filtrar per tag</label>
                                <input type="text" id="tagFilter" class="filter-input"
                                    placeholder="Ex: empatia, cooperacio...">
                            </div>

                            <!-- Digital -->
                            <div class="filter-group">
                                <label class="filter-label">Recursos digitals</label>
                                <select id="digitalFilter" class="filter-select">
                                    <option value="all">Tots</option>
                                    <option value="si">Requereix digital</option>
                                    <option value="no">Sense digital</option>
                                </select>
                            </div>

                            <!-- Materials Search -->
                            <div class="filter-group">
                                <label class="filter-label">Cerca per materials</label>
                                <input type="text" id="materialFilter" class="filter-input"
                                    placeholder="Ex: pilotes, projector, papers...">
                            </div>

                            <!-- Vulnerabilitat -->
                            <div class="filter-group">
                                <label class="filter-label">Vulnerabilitat emocional m√†x</label>
                                <div class="range-wrapper">
                                    <input type="range" id="vulnerabilitatFilter" min="1" max="5" value="5"
                                        class="range-slider">
                                    <span class="range-value" id="vulnerabilitatValue">5</span>
                                </div>
                            </div>

                            <!-- Experiencia Docent -->
                            <div class="filter-group">
                                <label class="filter-label">Experi√®ncia docent</label>
                                <select id="experienciaFilter" class="filter-select">
                                    <option value="all">Totes</option>
                                    <option value="baixa">Baixa</option>
                                    <option value="mitjana">Mitjana</option>
                                    <option value="alta">Alta</option>
                                </select>
                            </div>

                            <!-- Complexitat Logistica -->
                            <div class="filter-group">
                                <label class="filter-label">Complexitat log√≠stica</label>
                                <select id="complexitatFilter" class="filter-select">
                                    <option value="all">Totes</option>
                                    <option value="baixa">Baixa</option>
                                    <option value="mitjana">Mitjana</option>
                                    <option value="alta">Alta</option>
                                </select>
                            </div>

                            <!-- Qualitat (Stars) -->
                            <div class="filter-group">
                                <label class="filter-label">Qualitat m√≠nima (estrelles)</label>
                                <div class="range-wrapper">
                                    <input type="range" id="qualitatFilter" min="0" max="5" step="0.5" value="0"
                                        class="range-slider">
                                    <span class="range-value" id="qualitatValue">Totes</span>
                                </div>
                            </div>

                            <!-- Only Favorites -->
                            <div class="filter-group">
                                <label class="filter-label">Nom√©s favorits</label>
                                <label class="switch">
                                    <input type="checkbox" id="favoritesOnly">
                                    <span class="switch-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="drawer-footer">
                        <button class="btn btn-ghost" id="clearFilters">Netejar</button>
                        <button class="btn btn-primary" id="applyFilters">Aplicar Filtres</button>
                    </div>
                </section>
            </div>

            <!-- Results Bar -->
            <div class="results-bar">
                <span class="results-count" id="resultsCount">Carregant...</span>
                <div class="sort-wrapper">
                    <label>Ordenar per:</label>
                    <select id="sortSelect" class="sort-select">
                        <option value="recent">M√©s recents</option>
                        <option value="stars-desc">Qualitat (5 Estrelles)</option>
                        <option value="title">T√≠tol A-Z</option>
                        <option value="time-asc">Durada: Curta primer</option>
                        <option value="time-desc">Durada: Llarga primer</option>
                        <option value="participants-asc">Participants: Menys primer</option>
                    </select>
                </div>
            </div>

            <!-- Cards Grid -->
            <div class="cards-wrapper">
                <div class="cards-grid" id="cardsGrid">
                    <!-- Dynamic cards -->
                </div>
            </div>

            <!-- Load More -->
            <div class="load-more-wrapper hidden" id="loadMoreWrapper">
                <button class="btn btn-secondary" id="loadMoreBtn">Carregar m√©s din√†miques</button>
            </div>
        </main>

        <!-- Modal -->
        <div class="modal-overlay hidden" id="modalOverlay">
            <div class="modal" id="modal">
                <div class="modal-header">
                    <h2 class="modal-title" id="modalTitle">T√≠tol Din√†mica</h2>
                    <div class="modal-actions">
                        <button class="modal-btn" id="modalFavorite" title="Afegir a favorits">‚òÜ</button>
                        <button class="modal-btn" id="modalCopy" title="Copiar JSON">üìã</button>
                        <button class="modal-btn modal-close" id="modalClose">‚úï</button>
                    </div>
                </div>
                <div class="modal-body" id="modalBody">
                    <!-- Dynamic modal content -->
                </div>
            </div>
        </div>

        <!-- Compare Panel -->
        <div class="compare-panel hidden" id="comparePanel">
            <div class="compare-header">
                <h3>Comparar Din√†miques</h3>
                <button class="btn btn-ghost" id="clearCompare">Netejar</button>
            </div>
            <div class="compare-items" id="compareItems">
                <!-- Selected items for comparison -->
            </div>
            <button class="btn btn-primary" id="doCompare" disabled>Comparar (0/3)</button>
        </div>

        <!-- Toast Notifications -->
        <div class="toast-container" id="toastContainer"></div>
    </div>

    <script type="module" src="app.js"></script>
</body>

</html>